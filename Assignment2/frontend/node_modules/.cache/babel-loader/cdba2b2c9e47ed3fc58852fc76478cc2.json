{"ast":null,"code":"var _jsxFileName = \"/home/swastik/Desktop/DASS/Assignment2/frontend/src/components/search.js\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Navbar, Nav, NavItem, NavDropdown, MenuItem, InputGroup, FormControl, Button, DropdownButton, Dropdown } from 'react-bootstrap';\nimport { MDBContainer, MDBBtn, MDBModal, MDBModalBody, MDBModalHeader, MDBModalFooter } from 'mdbreact';\nimport React, { Component } from 'react';\nimport { Table } from 'react-bootstrap';\nimport { BrowserRouter as Router, Route, Link, Redirect } from \"react-router-dom\";\nimport axios from 'axios';\nexport default class Search extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggle = nr => () => {\n      let modalNumber = 'modal' + nr;\n      this.setState({\n        [modalNumber]: !this.state[modalNumber]\n      });\n    };\n\n    this.state = {\n      id: this.props.match.params.id,\n      name: '',\n      arr: {},\n      error: '',\n      length: '',\n      order: {},\n      size: '',\n      modal13: false\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n    this.onChangename = this.onChangename.bind(this);\n    this.createTable = this.createTable.bind(this);\n    this.Order = this.Order.bind(this);\n    this.getDetails = this.getDetails.bind(this);\n    this.handleSort = this.handleSort.bind(this);\n    this.showreview = this.showreview.bind(this);\n  } // componentDidMount(){\n  //     this.getDetails();\n  //     this.interval = setInterval(() => {\n  //         this.getDetails();\n  //       }, 8000);\n  // }\n\n\n  getDetails() {\n    axios.get('http://localhost:4000/list/product/' + this.state.name).then(res => {\n      this.setState({\n        length: res.data.length\n      });\n      this.setState({\n        arr: res.data\n      });\n    }).then(() => {\n      this.state.length > 0 ? this.setState({\n        error: ''\n      }) : this.setState({\n        error: '* No Data with given product found'\n      });\n    }); // .catch(err=> this.setState({error:'Please enter appropriate name (it should be a  string)'}))\n\n    axios.get('http://localhost:4000/order/').then(res => {\n      this.setState({\n        order: res.data\n      });\n      this.setState({\n        size: res.data.length\n      }); // console.log('arr')\n      // console.log(this.state.arr)\n    });\n  }\n\n  handleSort(e) {\n    this.setState({\n      arr: this.state.arr.sort((a, b) => a[e] > b[e] ? 1 : b[e] > a[e] ? -1 : 0)\n    });\n  }\n\n  showreview(e, index) {}\n\n  Order(e, info) {\n    const inputvalue = prompt('Quantity is :');\n    const data = {\n      username: info.username,\n      productname: this.state.name,\n      price: info.price,\n      quantity: info.quantity,\n      value: inputvalue,\n      doc_id: info._id\n    };\n\n    if (data.value > data.quantity) {\n      alert('Input quantity is more than the  present quantity');\n    } else {\n      axios.post('http://localhost:4000/list/update', data).then(res => {\n        let arrnew = this.state.arr;\n        arrnew[info.index]['quantity'] = info.quantity - inputvalue;\n        console.log(arrnew[info.index]['quantity']);\n        this.setState({\n          arr: arrnew\n        });\n        console.log(this.state.arr[info.index]['quantity']);\n        this.render();\n      });\n      const info_data = {\n        name: this.state.id,\n        pid: info._id,\n        quantity: inputvalue\n      };\n      console.log(info_data);\n      axios.post('http://localhost:4000/order/add', info_data).then(res => console.log(res.data));\n    }\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    this.getDetails();\n  }\n\n  onChangename(e) {\n    this.setState({\n      name: e.target.value\n    });\n  }\n\n  createTable() {\n    let table = [];\n    let child = [];\n    child.push(React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, 'Vendor'));\n    child.push(React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, 'Price'));\n    child.push(React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, 'Quantity'));\n    child.push(React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, 'Order Button'));\n    table.push(React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, child));\n\n    for (var i = 0; i < this.state.length; i++) {\n      let children = [];\n      let info = {};\n      info['index'] = i;\n      let remove = 0;\n\n      for (var key in this.state.arr[i]) {\n        if (this.state.arr[i]['quantity'] == 0) {\n          remove = 1;\n        }\n\n        if (key != 'productname' && key != '_id' && key != '__v' && key != 'initialquantity' && key != 'status') {\n          if (key == 'username') children.push(React.createElement(\"td\", {\n            onClick: e => this.showreview(e, info['index']),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          }, this.state.arr[i][key]));else children.push(React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158\n            },\n            __self: this\n          }, this.state.arr[i][key]));\n          info[key] = this.state.arr[i][key];\n        }\n\n        info[key] = this.state.arr[i][key];\n      }\n\n      if (remove == 1) continue;\n      children.push(React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"success\",\n        value: info,\n        onClick: e => this.Order(e, info),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Order\")));\n      table.push(React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, children));\n    }\n\n    return table;\n  } // componentWillUnmount() {\n  //     clearInterval(this.interval);\n  // }\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(MDBContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(MDBBtn, {\n      color: \"primary\",\n      onClick: this.toggle(13),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Modal\"), React.createElement(MDBModal, {\n      isOpen: this.state.modal13,\n      toggle: this.toggle(13),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(MDBModalHeader, {\n      toggle: this.toggle(13),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Modal title\"), React.createElement(MDBModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\"), React.createElement(MDBModalFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(MDBBtn, {\n      color: \"secondary\",\n      onClick: this.toggle(13),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"Close\"), React.createElement(MDBBtn, {\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, \"Save changes\")))), React.createElement(InputGroup, {\n      className: \"mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      placeholder: \"Recipient's username\",\n      \"aria-label\": \"Recipient's username\",\n      \"aria-describedby\": \"basic-addon2\",\n      onChange: this.onChangename,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }), React.createElement(InputGroup.Append, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"outline-dark\",\n      onClick: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, \"Search\"), React.createElement(DropdownButton, {\n      id: \"Sort\",\n      title: \"Sort By\",\n      variant: \"info\",\n      onSelect: e => this.handleSort(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(Dropdown.Item, {\n      eventKey: \"quantity\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, \"Quantity\"), React.createElement(Dropdown.Item, {\n      eventKey: \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, \"Price\")))), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, this.state.error), React.createElement(Table, {\n      responsive: true,\n      striped: true,\n      bordered: true,\n      hover: true,\n      variant: \"dark\",\n      striped: true,\n      bordered: true,\n      hover: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, this.createTable()));\n  }\n\n}","map":{"version":3,"sources":["/home/swastik/Desktop/DASS/Assignment2/frontend/src/components/search.js"],"names":["Navbar","Nav","NavItem","NavDropdown","MenuItem","InputGroup","FormControl","Button","DropdownButton","Dropdown","MDBContainer","MDBBtn","MDBModal","MDBModalBody","MDBModalHeader","MDBModalFooter","React","Component","Table","BrowserRouter","Router","Route","Link","Redirect","axios","Search","constructor","props","toggle","nr","modalNumber","setState","state","id","match","params","name","arr","error","length","order","size","modal13","onSubmit","bind","onChangename","createTable","Order","getDetails","handleSort","showreview","get","then","res","data","e","sort","a","b","index","info","inputvalue","prompt","username","productname","price","quantity","value","doc_id","_id","alert","post","arrnew","console","log","render","info_data","pid","preventDefault","target","table","child","push","i","children","remove","key"],"mappings":"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","sourcesContent":["import 'bootstrap/dist/css/bootstrap.min.css'\nimport { Navbar, Nav, NavItem, NavDropdown, MenuItem,InputGroup,FormControl,Button,DropdownButton,Dropdown } from 'react-bootstrap';\nimport { MDBContainer, MDBBtn, MDBModal, MDBModalBody, MDBModalHeader, MDBModalFooter } from 'mdbreact';\nimport React, {Component} from 'react';\nimport {Table} from  'react-bootstrap' \nimport { BrowserRouter as Router, Route, Link,Redirect } from \"react-router-dom\"\nimport axios from 'axios';\n\nexport default class Search extends Component{\n    constructor(props){\n        super(props)\n        this.state={\n            id:this.props.match.params.id,\n            name:'',\n            arr:{},\n            error:'',\n            length:'',\n            order:{},\n            size:'',\n            modal13:false\n        }\n        this.onSubmit=this.onSubmit.bind(this)\n        this.onChangename=this.onChangename.bind(this)\n        this.createTable=this.createTable.bind(this)\n        this.Order=this.Order.bind(this)\n        this.getDetails=this.getDetails.bind(this)\n        this.handleSort=this.handleSort.bind(this)\n        this.showreview=this.showreview.bind(this)\n    }\n    // componentDidMount(){\n    //     this.getDetails();\n    //     this.interval = setInterval(() => {\n    //         this.getDetails();\n    //       }, 8000);\n\n    // }\n    toggle = nr => () => {\n        let modalNumber = 'modal' + nr\n        this.setState({\n          [modalNumber]: !this.state[modalNumber]\n        });\n      }\n      \n    getDetails(){\n        axios.get('http://localhost:4000/list/product/'+this.state.name)\n        .then((res)=>{ \n     \n        this.setState({length:res.data.length})\n        this.setState({arr:res.data})\n\n        \n        })\n        .then(()=>{\n            (this.state.length>0)?(this.setState({error:''})):(this.setState({error:'* No Data with given product found'}))\n        })\n        // .catch(err=> this.setState({error:'Please enter appropriate name (it should be a  string)'}))\n        axios.get('http://localhost:4000/order/')\n        .then(res=>{\n            this.setState({order:res.data})\n            this.setState({size:res.data.length})\n            // console.log('arr')\n            // console.log(this.state.arr)\n        })\n\n    }\n    handleSort(e){\n        this.setState({\n            arr:this.state.arr.sort((a,b)=>\n                a[e]>b[e]?1:b[e]>a[e]?-1:0\n            )\n        });\n    }\n    showreview(e,index){\n        \n\n\n    }\n    Order(e,info){\n \n        const inputvalue=prompt('Quantity is :')\n        const data={\n            username:info.username,\n            productname:this.state.name,\n            price: info.price,\n            quantity:info.quantity,\n            value:inputvalue,\n            doc_id:info._id\n        }\n       \n        if(data.value>data.quantity)\n        {\n            alert('Input quantity is more than the  present quantity')\n        }\n        else\n        {\n            axios.post('http://localhost:4000/list/update', data)\n            .then((res)=>{\n              \n                let arrnew=this.state.arr\n                arrnew[info.index]['quantity']=info.quantity-inputvalue\n                console.log(arrnew[info.index]['quantity'])\n                this.setState({arr:arrnew})\n                console.log(this.state.arr[info.index]['quantity'])\n                this.render()\n            })\n            const  info_data={\n                name:this.state.id,\n                pid:info._id,\n                quantity:inputvalue\n            }\n            console.log(info_data)\n            axios.post('http://localhost:4000/order/add',info_data)\n            .then(res=>console.log(res.data))\n            \n        }\n    }\n    onSubmit(e)\n    {\n\n        e.preventDefault();\n        \n        this.getDetails()\n    \n   \n    }\n\n    onChangename(e)\n    {\n        this.setState({name:e.target.value})\n        \n    }\n    createTable()\n    {\n        let table=[]\n        let child=[]\n        child.push(<th>{'Vendor'}</th>)\n        child.push(<th>{'Price'}</th>)\n        child.push(<th>{'Quantity'}</th>)\n        child.push(<th>{'Order Button'}</th>)\n        table.push(<tr>{child}</tr>)\n\n        for(var i=0;i<this.state.length;i++)\n        {\n            let children=[]\n            let info={}\n            info['index']=i\n            let remove=0\n            for (var key in this.state.arr[i]){\n                if(this.state.arr[i]['quantity']==0)\n                {\n                    remove=1\n                }\n                if(key!='productname' && key!='_id' && key!='__v' && key!='initialquantity' && key!='status')\n                {\n                    if(key=='username')\n                    children.push(<td onClick={(e)=>this.showreview(e,info['index'])}>{this.state.arr[i][key]}</td>)\n                    else\n                    children.push(<td>{this.state.arr[i][key]}</td>)\n\n                    info[key]=this.state.arr[i][key]\n                }\n                info[key]=this.state.arr[i][key]\n\n            }\n            if(remove==1)\n            continue\n       \n            children.push(<td><Button variant=\"success\" value={info} onClick={(e)=>this.Order(e,info)} >Order</Button></td>)\n            table.push(<tr>{children}</tr>)\n\n        }\n        return table\n    }\n    // componentWillUnmount() {\n    //     clearInterval(this.interval);\n    // }\n    render(){\n\n        return(\n            <div>\n            <MDBContainer>\n      <MDBBtn color=\"primary\" onClick={this.toggle(13)}>\n        Modal\n      </MDBBtn>\n      <MDBModal isOpen={this.state.modal13} toggle={this.toggle(13)}>\n        <MDBModalHeader toggle={this.toggle(13)}>\n          Modal title\n        </MDBModalHeader>\n        <MDBModalBody>\n          Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n          eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n          enim ad minim veniam, quis nostrud exercitation ullamco laboris\n          nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit\n          amet, consectetur adipisicing elit, sed do eiusmod tempor\n          incididunt ut labore et dolore magna aliqua. Ut enim ad minim\n          veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip\n          ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur\n          adipisicing elit, sed do eiusmod tempor incididunt ut labore et\n          dolore magna aliqua. Ut enim ad minim veniam, quis nostrud\n          exercitation ullamco laboris nisi ut aliquip ex ea commodo\n          consequat. Lorem ipsum dolor sit amet, consectetur adipisicing\n          elit, sed do eiusmod tempor incididunt ut labore et dolore magna\n          aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco\n          laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor\n          sit amet, consectetur adipisicing elit, sed do eiusmod tempor\n          incididunt ut labore et dolore magna aliqua. Ut enim ad minim\n          veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip\n          ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur\n          adipisicing elit, sed do eiusmod tempor incididunt ut labore et\n          dolore magna aliqua. Ut enim ad minim veniam, quis nostrud\n          exercitation ullamco laboris nisi ut aliquip ex ea commodo\n          consequat. Lorem ipsum dolor sit amet, consectetur adipisicing\n          elit, sed do eiusmod tempor incididunt ut labore et dolore magna\n          aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco\n          laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor\n          sit amet, consectetur adipisicing elit, sed do eiusmod tempor\n          incididunt ut labore et dolore magna aliqua. Ut enim ad minim\n          veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip\n          ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur\n          adipisicing elit, sed do eiusmod tempor incididunt ut labore et\n          dolore magna aliqua. Ut enim ad minim veniam, quis nostrud\n          exercitation ullamco laboris nisi ut aliquip ex ea commodo\n          consequat. Lorem ipsum dolor sit amet, consectetur adipisicing\n          elit, sed do eiusmod tempor incididunt ut labore et dolore magna\n          aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco\n          laboris nisi ut aliquip ex ea commodo consequat. Lorem ipsum dolor\n          sit amet, consectetur adipisicing elit, sed do eiusmod tempor\n          incididunt ut labore et dolore magna aliqua. Ut enim ad minim\n          veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip\n          ex ea commodo consequat. Lorem ipsum dolor sit amet, consectetur\n          adipisicing elit, sed do eiusmod tempor incididunt ut labore et\n          dolore magna aliqua. Ut enim ad minim veniam, quis nostrud\n          exercitation ullamco laboris nisi ut aliquip ex ea commodo\n          consequat.\n        </MDBModalBody>\n        <MDBModalFooter>\n          <MDBBtn color=\"secondary\" onClick={this.toggle(13)}>\n            Close\n          </MDBBtn>\n          <MDBBtn color=\"primary\">Save changes</MDBBtn>\n        </MDBModalFooter>\n      </MDBModal>\n    </MDBContainer>\n            <InputGroup className=\"mb-3\">\n            <FormControl\n              placeholder=\"Recipient's username\"\n              aria-label=\"Recipient's username\"\n              aria-describedby=\"basic-addon2\"\n              onChange={this.onChangename}\n              />\n            <InputGroup.Append >\n              <Button variant=\"outline-dark\" onClick={this.onSubmit}>Search</Button>\n              <DropdownButton \n              id=\"Sort\"\n              title=\"Sort By\"\n              variant=\"info\"\n              onSelect={e=>this.handleSort(e)}\n              >\n              <Dropdown.Item eventKey=\"quantity\">Quantity</Dropdown.Item>\n              <Dropdown.Item eventKey=\"price\">Price</Dropdown.Item>\n              </DropdownButton>\n            </InputGroup.Append>\n          </InputGroup>\n          <p>{this.state.error}</p>\n           \n            <Table responsive striped bordered hover variant=\"dark\" striped bordered hover>\n            {this.createTable()}\n            </Table>\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}