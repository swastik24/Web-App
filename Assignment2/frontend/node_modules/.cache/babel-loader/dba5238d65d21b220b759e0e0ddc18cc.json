{"ast":null,"code":"var _jsxFileName = \"/home/swastik/Desktop/DASS/Assignment2/frontend/src/components/order.js\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Navbar, Nav, NavItem, NavDropdown, MenuItem, Card, Button, Form, Modal, ButtonToolbar } from 'react-bootstrap';\nimport { MDBContainer, MDBBtn, MDBModal, MDBModalBody, MDBModalHeader, MDBModalFooter } from 'mdbreact';\nimport React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Link, Redirect } from \"react-router-dom\";\nimport axios from 'axios';\nexport default class vendor extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: this.props.match.params.id,\n      arr: {},\n      len1: 0,\n      product: {},\n      len2: 0,\n      modal14: false\n    };\n    this.getDetails = this.getDetails.bind(this);\n    this.edit = this.edit.bind(this);\n    this.rateproduct = this.rateproduct.bind(this);\n    this.ratevendor = this.ratevendor.bind(this);\n  }\n\n  componentDidMount() {\n    this.getDetails();\n    this.interval = setInterval(() => {\n      this.getDetails();\n    }, 3000);\n  }\n\n  ratevendor(e, index) {\n    let rating = prompt('Rate the vendor b/w (1,5):');\n    let review = '';\n    if (rating > 5 || rating < 1) rating = '';else if (rating >= 1 && rating <= 5) review = prompt('Write a review for the vendor: ');\n    const data = {\n      id: this.state.arr[index[0]]._id,\n      rate: rating,\n      review: review\n    };\n    axios.post('http://localhost:4000/order/vendor', data).then(res => console.log('Vendor review updated'));\n  }\n\n  rateproduct(e, index) {\n    let rating = prompt('Rate the product b/w (1,5):');\n    let review = '';\n    if (rating > 5 || rating < 1) rating = '';else if (rating >= 1 && rating <= 5) {\n      review = prompt('Write a review for the product: ');\n    }\n    const data = {\n      id: this.state.arr[index[0]]._id,\n      rate: rating,\n      review: review\n    };\n    axios.post('http://localhost:4000/order/product', data).then(res => console.log('Product  review updated'));\n  }\n\n  getDetails() {\n    axios.get('http://localhost:4000/order/' + this.state.id).then(res => {\n      this.setState({\n        arr: res.data\n      });\n      this.setState({\n        len1: res.data.length\n      }); // console.log('arr')\n      // console.log(this.state.arr)\n    });\n    axios.get('http://localhost:4000/list').then(res => {\n      this.setState({\n        product: res.data\n      });\n      this.setState({\n        len2: res.data.length\n      }); // console.log('product')\n      // console.log(this.state.product)\n\n      this.render();\n    });\n  }\n\n  edit(e, index) {\n    let inputvalue = prompt('Enter the quantity u want to order !');\n    console.log('index array');\n    console.log(index);\n\n    if (inputvalue > this.state.arr[index[0]].quantity + this.state.product[index[1]].quantity) {\n      alert('Enter a valid input');\n    } else {\n      const q = this.state.arr[index[0]].quantity + this.state.product[index[1]].quantity; // console.log('input')\n      // console.log(inputvalue)\n\n      let newarr = this.state.arr;\n      newarr[index[0]].quantity = inputvalue;\n      this.setState({\n        arr: newarr\n      }); // console.log('q')\n      // console.log(q)\n\n      newarr = this.state.product;\n      newarr[index[1]].quantity = q - inputvalue;\n      this.setState({\n        product: newarr\n      });\n      const data = {\n        doc_id: this.state.product[index[1]]._id,\n        quantity: q,\n        value: inputvalue\n      };\n      const newdata = {\n        doc_id: this.state.arr[index[0]]._id,\n        value: inputvalue\n      };\n      axios.post('http://localhost:4000/list/update', data).then(res => console.log(res.data));\n      axios.post('http://localhost:4000/order/update', newdata).then(res => console.log(res.data));\n    }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  render() {\n    let array = [];\n\n    for (var i = 0; i < this.state.len1; i++) {\n      let but = '';\n      const index = [];\n      let stat = 'Waiting';\n      let k = 0;\n      let rateProduct = '';\n      let rateVendor = '';\n\n      for (; k < this.state.len2; k++) {\n        if (this.state.arr[i].pid == this.state.product[k]._id) {\n          // console.log('shit')\n          break;\n        }\n      }\n\n      if (k == this.state.len2 && k == 0) continue; // console.log(k)\n\n      index[0] = i;\n      index[1] = k;\n\n      if (k == this.state.len2) {\n        stat = 'Product has been deleted by vendor';\n        array.push(React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, React.createElement(Card, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, React.createElement(Card.Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, \"Order \", i + 1), React.createElement(Card.Body, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, React.createElement(Card.Title, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, \"Order Details\"), React.createElement(Card.Text, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, \"Status : \", stat)))));\n        continue;\n      }\n\n      if (this.state.product[k].quantity == 0) {\n        stat = 'Placed';\n        rateVendor = React.createElement(Button, {\n          variant: \"outline-secondary\",\n          onClick: e => this.ratevendor(e, index),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, \"Rate Vendor\");\n      }\n\n      if (this.state.product[k].status == \"Dispatched\") {\n        stat = 'Dispatched';\n        rateProduct = React.createElement(Button, {\n          variant: \"outline-secondary\",\n          onClick: e => this.rateproduct(e, index),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }, \"Rate Product\");\n      }\n\n      if (this.state.arr[i].cancel == 1) stat = 'Canceled';\n      if (stat == 'Waiting') but = React.createElement(Button, {\n        variant: \"primary\",\n        onClick: e => this.edit(e, index),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"Edit\");\n      array.push(React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(Card.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Order \", i + 1), React.createElement(Card.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(Card.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"Order Details\"), React.createElement(Card.Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"Product name:\", this.state.product[k].productname, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }), \"Vendor name:\", this.state.product[k].username, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), \"Quantity ordered:\", this.state.arr[i].quantity, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }), \"Quantity Remaining: \", this.state.product[k].quantity, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }), \"Status : \", stat), but, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), rateProduct, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), rateVendor))));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, array);\n  }\n\n}","map":{"version":3,"sources":["/home/swastik/Desktop/DASS/Assignment2/frontend/src/components/order.js"],"names":["Navbar","Nav","NavItem","NavDropdown","MenuItem","Card","Button","Form","Modal","ButtonToolbar","MDBContainer","MDBBtn","MDBModal","MDBModalBody","MDBModalHeader","MDBModalFooter","React","Component","BrowserRouter","Router","Route","Link","Redirect","axios","vendor","constructor","props","state","id","match","params","arr","len1","product","len2","modal14","getDetails","bind","edit","rateproduct","ratevendor","componentDidMount","interval","setInterval","e","index","rating","prompt","review","data","_id","rate","post","then","res","console","log","get","setState","length","render","inputvalue","quantity","alert","q","newarr","doc_id","value","newdata","componentWillUnmount","clearInterval","array","i","but","stat","k","rateProduct","rateVendor","pid","push","status","cancel","productname","username"],"mappings":"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","sourcesContent":["import 'bootstrap/dist/css/bootstrap.min.css'\nimport { Navbar, Nav, NavItem, NavDropdown, MenuItem ,Card,Button,Form,Modal,ButtonToolbar} from 'react-bootstrap';\nimport { MDBContainer, MDBBtn, MDBModal, MDBModalBody, MDBModalHeader, MDBModalFooter } from 'mdbreact';\nimport React, {Component} from 'react';\nimport { BrowserRouter as Router, Route, Link,Redirect } from \"react-router-dom\"\nimport axios from 'axios';\n\nexport default class vendor extends Component{\n    constructor(props)\n    {\n        super(props)\n        this.state={\n            id:this.props.match.params.id,\n            arr:{},\n            len1:0,\n            product:{},\n            len2:0,\n            modal14: false\n        }\n        \n        this.getDetails=this.getDetails.bind(this)\n        this.edit=this.edit.bind(this)\n        this.rateproduct=this.rateproduct.bind(this)\n        this.ratevendor=this.ratevendor.bind(this)\n      \n    }\n    componentDidMount(){\n        this.getDetails();\n        this.interval = setInterval(() => {\n            this.getDetails();\n          }, 3000);\n\n    }\n    ratevendor(e,index){\n        let rating=prompt('Rate the vendor b/w (1,5):')\n        let review=''\n        if(rating>5 || rating<1)\n        rating=''\n        else if(rating>=1 && rating<=5)\n        review=prompt('Write a review for the vendor: ')\n        const data={\n            id:this.state.arr[index[0]]._id,\n            rate:rating,\n            review:review\n        }\n        axios.post('http://localhost:4000/order/vendor',data)\n        .then(res=>console.log('Vendor review updated'))\n    }\n    rateproduct(e,index){\n        let rating=prompt('Rate the product b/w (1,5):')\n        let review=''\n        if(rating>5 || rating<1)\n        rating=''\n        else if(rating>=1 && rating<=5){\n        review=prompt('Write a review for the product: ')\n        }\n        const data={\n            id:this.state.arr[index[0]]._id,\n            rate:rating,\n            review:review\n        }\n        axios.post('http://localhost:4000/order/product',data)\n        .then(res=>console.log('Product  review updated'))\n    }\n    getDetails(){\n        axios.get('http://localhost:4000/order/'+this.state.id)\n        .then(res=>{\n            this.setState({arr:res.data})\n            this.setState({len1:res.data.length})\n            // console.log('arr')\n            // console.log(this.state.arr)\n        })\n        axios.get('http://localhost:4000/list')\n        .then(res=>{\n            this.setState({product:res.data})\n            this.setState({len2:res.data.length})\n\n            // console.log('product')\n            // console.log(this.state.product)\n            this.render()\n        })\n\n    }\n\n      \n    edit(e,index){\n        let inputvalue=prompt('Enter the quantity u want to order !')\n        console.log('index array')\n        console.log(index)\n        if(inputvalue>(this.state.arr[index[0]].quantity+this.state.product[index[1]].quantity))\n        {\n            alert('Enter a valid input')\n        }\n        else{\n            const q=this.state.arr[index[0]].quantity+this.state.product[index[1]].quantity\n            // console.log('input')\n            // console.log(inputvalue)\n            let newarr=this.state.arr;\n            newarr[index[0]].quantity=inputvalue\n            this.setState({arr:newarr})\n            \n            \n            \n            // console.log('q')\n            // console.log(q)\n            \n           \n            newarr=this.state.product\n            newarr[index[1]].quantity=q-inputvalue\n            this.setState({product:newarr})\n           \n            const data={\n                doc_id:this.state.product[index[1]]._id,\n                quantity:q,\n                value:inputvalue\n            }\n            const newdata={\n                doc_id:this.state.arr[index[0]]._id,\n                value:inputvalue\n            }\n            axios.post('http://localhost:4000/list/update', data)\n            .then(res=>console.log(res.data))\n            axios.post('http://localhost:4000/order/update',newdata)\n            .then(res=>console.log(res.data))\n        }\n    }\n    componentWillUnmount() {\n        clearInterval(this.interval);\n    }\n    render()\n    {   \n        let array=[]\n        \n            for(var i=0;i<this.state.len1;i++){\n                let but=''\n                const index=[];\n                let stat='Waiting'\n                let k=0;\n                let  rateProduct=''\n                let rateVendor=''\n                for(;k<this.state.len2;k++)\n                {\n                    if(this.state.arr[i].pid==this.state.product[k]._id)\n                    {\n                        // console.log('shit')\n                        break\n                    }\n\n                }\n                if(k==this.state.len2 && k==0 )\n                continue\n                // console.log(k)\n            index[0]=i;index[1]=k;\n            if(k==this.state.len2){\n                stat='Product has been deleted by vendor'\n                array.push(\n                    <div>\n                    <Card>\n                    <Card.Header>Order {i+1}</Card.Header>\n                    <Card.Body>\n                        <Card.Title>Order Details</Card.Title>\n                        <Card.Text>\n                        \n                        Status : {stat}\n                        </Card.Text>\n                        \n                    </Card.Body>\n                    </Card>\n                    </div>\n                )\n                continue\n            }\n            if(this.state.product[k].quantity==0){\n                stat='Placed'\n                rateVendor=<Button variant=\"outline-secondary\" onClick={(e)=>this.ratevendor(e,index)}>Rate Vendor</Button>\n            }\n            if(this.state.product[k].status==\"Dispatched\"){\n                stat='Dispatched'\n                rateProduct=<Button variant=\"outline-secondary\" onClick={(e)=>this.rateproduct(e,index)}>Rate Product</Button>\n            }\n            if(this.state.arr[i].cancel==1)\n                stat='Canceled'\n            \n            \n            if(stat=='Waiting')\n                but=<Button variant=\"primary\" onClick={(e)=>this.edit(e,index)}>Edit</Button>\n\n                array.push(\n                <div>\n                <Card>\n                <Card.Header>Order {i+1}</Card.Header>\n                <Card.Body>\n                    <Card.Title>Order Details</Card.Title>\n                    <Card.Text>\n                    Product name:{this.state.product[k].productname}\n                    <br/>\n                    Vendor name:{this.state.product[k].username}\n                    <br/>\n                    Quantity ordered:{this.state.arr[i].quantity}\n                    <br/>\n                    Quantity Remaining: {this.state.product[k].quantity}\n                    <br/>\n                    Status : {stat}\n\n                    </Card.Text>\n                    {but}\n                    <br/>\n                    {rateProduct}\n                    <br/><br/>\n                    {rateVendor}\n                   \n                   \n                </Card.Body>\n                </Card>\n                </div>\n            )\n        }\n        \n        return(\n            <div>\n            \n            {array}\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}